# Changelog

## [2025-01-27] - Experts: переход на GSAP horizontalLoop и Draggable

### Добавлено

- Создана утилита `horizontal-loop.ts` для бесконечной горизонтальной прокрутки элементов разной ширины
- Интегрирован GSAP Draggable для интерактивного перетаскивания карточек
- Добавлена пауза прокрутки при перетаскивании карточек
- Создан хук `use-experts-main-timeline` для основной GSAP-анимации
- Создана утилита `split-text-to-words.ts` для разбиения текста на слова

### Изменено

- Заменен Swiper на GSAP horizontalLoop для бесконечной прокрутки
- Обновлен компонент `Experts` для использования GSAP Draggable
- Убраны зависимости от Swiper и связанные файлы
- Улучшена производительность анимаций

### Исправлено

- Улучшена плавность перетаскивания карточек с мягкими ограничениями
- Добавлены ограничения для предотвращения выхода карточек за границы контейнера
- Карточки автоматически возвращаются на исходную позицию после перетаскивания
- Исправлены ошибки линтера в колбэках GSAP

### Технические детали

- Типы и зависимости изолированы, повышена читаемость и переиспользуемость
- Добавлены JSDoc-комментарии и шапки файлов
- Удалены неиспользуемые файлы: `use-experts-cards-movement.ts`, `config.swiper.ts`

## [2025-01-27] - Создание функции для точного измерения размеров элементов

### Добавлено

- Функция `measureElementSize` для точного измерения размеров элементов без влияния на оригинал
- Создание точной копии элемента с применением специальных стилей для измерения
- Возврат полного набора размеров: width, height, scrollWidth, scrollHeight, clientWidth, clientHeight
- Безопасное добавление и удаление клона из DOM

### Изменено

- Обновлен `useEffect` в компоненте `AccordionItem` для использования новой функции измерения
- Улучшена производительность за счет использования `useCallback` для функции измерения
- Добавлены дополнительные стили для клона: `visibility: hidden`, `pointerEvents: none`, `zIndex: -1`

### Технические детали

- Функция создает точную копию элемента с помощью `cloneNode(true)`
- Применяет стили для корректного измерения: `position: absolute`, `height: max-content`
- Скрывает клон от пользователя и предотвращает взаимодействие с ним
- Автоматически очищает DOM после измерения

## [2025-09-03] - Liquid Glass: корректное смещение без инверсии

### Изменено

- Обновлён SVG-фильтр в `src/shared/ui/liquid-glass-ui/index.tsx`:
  - Удалён лишний `feDisplacementMap` без `result`.
  - Канал Y переключён на `G` для всех карт (`red/green/blue`).
  - Значения `scale` сделаны положительными и снижены (80/70/60).
  - Усилен финальный `feGaussianBlur` до `0.7`.
  - Убрано `mix-blend-mode: difference` из встроенной карты смещения.

### Изменено (стили)

- В `styles/globals.scss` класс `liquidGlass` теперь использует `backdrop-filter: url(#filter) brightness(1.1) saturate(1.2);` для визуального соответствия оригиналу.

### Результат

- Пропала «реверсия/инверсия» задника, эффект совпадает с референсом.
- Хроматическая аберрация стала мягче и контролируемой.

## [2025-09-02] - Grant: реалистичное падение текста без дёрганий

### Изменено

- Обновлены keyframes `dropDownWord1/2/3` в `styles/pages/home/grant.scss` на пошаговые с лёгким перелётом и демпфированием (0%→60%→75%→88%→100%).
- Заменены кривые на `cubic-bezier(0.22, 0.61, 0.36, 1)` для более естественного затухания.
- Добавлены `opacity` в первых ключевых кадрах для мягкого появления.
- Убрано жёсткое стартовое смещение, включены `will-change`, `backface-visibility`, `transform-style` для плавности и устранения микродёрганий.

### Результат

- Падение текста выглядит физически реалистичным, без «рывков» в конце.
- Сохранены текущие задержки и порядок появления элементов.

### Добавлено

- Объединённый `grant-combined.svg` с SMIL-анимациями трёх слоёв (единый SVG для адаптивности).
- Компонент `Grant` теперь использует один SVG вместо трёх отдельных изображений.

## [2025-08-29] - Исправление анимации WaveAnimationUI

### Исправлено

- Удален лишний `console.log()` из хука `useAnimationWave`
- Исправлен конфликт между экземплярами `WaveAnimationUI` в zero hero блоке
- Убран параметр `reversed` из второго экземпляра `WaveAnimationUI` в zero hero
- Добавлены проверки на SSR (Server-Side Rendering) для предотвращения ошибок
- Оптимизирована производительность с использованием `requestAnimationFrame`
- Исправлены потенциальные ошибки с DOM-элементами в `renderCells`

### Технические детали

- В zero hero блоке теперь корректно работает анимация при движении мыши
- Первый экземпляр `WaveAnimationUI` (без `noAnimation`) отвечает за анимацию
- Второй экземпляр `WaveAnimationUI` (с `noAnimation`) используется только для фона
- Добавлены проверки `typeof window !== "undefined"` для совместимости с SSR
- Оптимизированы вызовы `updateGradients` через `requestAnimationFrame`
- Улучшена безопасность работы с DOM-элементами

## [2025-08-29] - Партнеры: мок-данные и карточки

### Добавлено

- Моковые данные `partners.data.ts` с типом `PartnerItem`
- Компонент карточки партнера `partner-card.tsx` (LiquidGlassUI)
- Разметка блока партнеров в `index.tsx` с сеткой партнеров
- Семантическая структура с заголовком и сеткой партнеров

### Структура данных

- **12 партнеров**: СИБУР, Фонд ПРЕЗИДЕНТСКИХ ГРАНТОВ, РОСКОНГРЕСС, ПСБ, ГАЗПРОМ, Российская Газета RGRU, КОМСОМОЛЬСКАЯ ПРАВДА, RMG РУССКАЯ МЕДИАГРУППА, LENTA.RU, вконтакте, АЛЬПИНА ПАБЛИШЕР, СФ
- **Логотипы**: Поддержка SVG логотипов партнеров
- **Ссылки**: Опциональные ссылки на сайты партнеров с безопасными атрибутами
- **Слоганы**: Поддержка слоганов (например, "Пространство доверия" для РОСКОНГРЕСС)

### Функциональность

- Карточки партнеров с логотипами, названиями и слоганами
- Кликабельные карточки с переходом на сайты партнеров
- Сеточная раскладка для адаптивного отображения
- Lazy loading для логотипов
- Доступность с ARIA-атрибутами

## [2025-08-29] - Эксперты и жюри: мок-данные и карточки

### Добавлено

- Моковые данные `experts.data.ts` с типом `ExpertItem`
- Компонент карточки эксперта `expert-card.tsx` (LiquidGlassUI)
- Разметка блока экспертов в `index.tsx` с описательным текстом
- Семантическая структура с заголовком, описанием и списком экспертов

### Структура данных

- **3 эксперта**: Галина Карелова (жюри), Диана Гурцкая (эксперт), Афанасий Саввин (эксперт)
- **Роли**: 'jury' и 'expert' с соответствующими бейджами
- **Изображения**: Поддержка фото экспертов с lazy loading

### Функциональность

- Карточки экспертов с фото, именем, должностью и ролью
- Двухколоночное описание роли жюри и экспертов
- Ссылка "Подробнее о жюри"
- Кнопка "Подать заявку" внизу блока

## [2025-08-29] - Этапы конкурса: мок-данные и карточки

### Добавлено

- Моковые данные `stages-of-the-competition.data.ts` с типом `StageItem`
- Компонент карточки этапа `card-stage.tsx` (LiquidGlassUI)
- Разметка списка этапов в `index.tsx` (семантический `<section>` и `<ul>`)

### Изменено

- Виджет `StagesOfTheCompetition` теперь выводит список этапов из мок-данных

## [2025-01-27] - Создание моковых данных и компонентов для номинаций

### Добавлено

- Моковые данные для 7 номинаций конкурса в файле `data.ts`
- Типизированный интерфейс `NominationItem` для структуры данных
- Компонент `AccordionItem` для отображения отдельных номинаций
- Обновленный компонент `Nominations` с функциональностью аккордеона
- Поддержка различных типов контента: текст, списки, изображения

### Структура данных

- **7 номинаций**: Активное долголетие, Женское лидерство, Инклюзивное общество, Развитие территорий, Ответственное отношение к животным, Экология, Душа России
- **Типы контента**: text, list, image с соответствующими данными
- **Логотипы**: Поддержка логотипов для номинаций (CD logo для активного долголетия)

### Функциональность

- Аккордеон с возможностью открытия/закрытия номинаций
- По умолчанию открыта номинация "Активное долголетие"
- Доступность с правильными ARIA-атрибутами
- Адаптивная структура для различных типов контента

## [2025-01-27] - Создание компонентов футера и формы обратной связи

### Добавлено

- Компонент `FeedbackForm` для подписки на обновления
- Семантическая разметка футера с контактной информацией
- Социальные ссылки (ВКонтакте, Telegram) с иконками
- Правовая информация (сезон 2025, политика конфиденциальности)
- Форма с валидацией email и согласием на обработку данных

### Структура компонентов

- **FeedbackForm**: Форма подписки с полем email, чекбоксом согласия и кнопкой отправки
- **Footer**: Контактная информация, социальные сети, копирайт и правовые ссылки

### Классы CSS

Использована методология БЭМ:

- `feedback-form` - основной блок формы
- `footer` - основной блок футера
- `footer__contact-info`, `footer__bottom` - элементы
- `footer__social-link`, `feedback-form__submit-button` - модификаторы

## [2025-01-27] - Рефакторинг: вынос шапки в отдельный компонент

### Изменено

- Вынес разметку шапки в отдельный компонент `ZeroHeroHeader`
- Обновил основной компонент `ZeroHero` для использования нового компонента шапки
- Улучшена модульность и переиспользуемость компонентов

### Добавлено

- Новый компонент `src/widgets/main-blocks/zero-hero/header.tsx`
- Импорт компонента шапки в основной hero-блок

## [2025-01-27] - Создание семантической разметки для hero-блока

### Добавлено

- Семантически правильная HTML-разметка для главного hero-блока проекта Innosocium
- Структура с использованием семантических тегов: `<header>`, `<main>`, `<footer>`, `<nav>`
- Навигационное меню с правильной структурой списков
- Галерея изображений с описательными alt-атрибутами
- Кнопка призыва к действию (CTA) для подачи заявки

### Структура компонента

- **Header**: Логотип, навигация, профиль пользователя
- **Main**: Основной контент с заголовками и описанием
- **Footer**: Дополнительная информация и галерея изображений

### Классы CSS

Использована методология БЭМ для именования классов:

- `zero-hero` - основной блок
- `zero-hero__header`, `zero-hero__main`, `zero-hero__footer` - элементы
- `zero-hero__nav-link`, `zero-hero__cta-button` - модификаторы

## [2025-01-27] - Исправление анимации партнеров

### Исправлено

- Устранено дергание анимации в конце прокрутки партнеров
- Убраны визуальные пробелы между элементами анимации
- Оптимизирована CSS анимация для плавной бесконечной прокрутки
- Исправлена структура HTML для корректной работы дублирующих элементов

### Технические изменения

- Изменена логика CSS анимации с translateX(-100%) на translateX(-50%)
- Убран gap в .partners\_\_track для устранения пробелов
- Добавлен transform: translateZ(0) для аппаратного ускорения
- Упрощена структура HTML - дублирующие элементы теперь в одном ul

## [2025-01-27] - Создание анимации для компонента Grant

### Добавлено

- Анимация выезжающего текста справа и слева с плавным появлением
- Анимация выпадающих сверху слов с кинетическим эффектом
- Состояния анимации с использованием React hooks
- Кастомные CSS transitions с cubic-bezier для плавности

### Изменено

- Компонент Grant.tsx - добавлены состояния анимации и useEffect
- Стили grant.scss - добавлены анимации и позиционирование для grant элементов

### Технические детали

- Текст появляется через 100ms с анимацией 0.8s (скорость выше среднего)
- Слова выпадают через 900ms с анимацией 1.2s (скорость ниже среднего для кинетического эффекта)
- Использованы cubic-bezier кривые для естественного движения

## [2025-01-27] - Обновление компонента LiquidGlassUI

### Добавлено

- Настраиваемые параметры для эффекта жидкого стекла
- Базовые настройки по умолчанию (scale, lightness, displace, blend, x/y селекторы, alpha, blur, цветовые каналы)
- Возможность переопределения параметров через props config
- Улучшенная система смешивания цветовых каналов
- Настройка насыщенности и размытия

### Изменено

- Компонент LiquidGlassUI теперь принимает опциональный параметр config
- Применены базовые настройки пользователя для всех SVG фильтров
- Обновлена документация компонента

### Исправлено

- Убраны дублирующиеся feDisplacementMap элементы
- Оптимизирована структура SVG фильтров

## [2025-01-27] - Исправление компонента LiquidGlassUI согласно оригинальному коду

### Добавлено

- Полное соответствие оригинальному коду LiquidGlassUI
- Динамическое построение SVG изображения для смещения
- Правильные параметры: icons, radius, border, displace, frost, width, height
- Корректная структура SVG фильтров с правильными scale значениями
- Условное применение эффекта инея (frost)

### Изменено

- Компонент полностью переписан для соответствия оригиналу
- Убраны неправильные параметры inputBlur/outputBlur
- Восстановлены правильные параметры blur, displace, frost
- Исправлена логика применения эффектов смещения

### Исправлено

- Структура SVG фильтров теперь точно соответствует оригиналу
- Правильные scale значения для каждого цветового канала
- Корректное применение эффектов инея и смещения
- Восстановлена оригинальная логика построения displacement image

## [2025-01-27] - Исправление производительности хука useLiquidGlass

### Исправлено

- Убран бесконечный цикл в useEffect
- Удалена зависимость от GSAP для улучшения производительности
- Исправлена неправильная сериализация SVG элемента
- Оптимизированы операции с DOM для предотвращения лагов
- Убраны лишние операции на каждом рендере

## [2025-01-27] - Добавление задержек для анимаций аккордеона

### Добавлено

- CSS переменные для настройки задержек анимаций
- Задержка 0.1s для поворота стрелки
- Задержка 0.2s для изменения высоты summary
- Задержка 0.3s для изменения текста
- Задержка 0.4s для появления контента
- Обратные задержки для закрытия аккордеона

### Изменено

- Анимации открытия теперь имеют последовательные задержки
- Анимации закрытия выполняются без задержек для быстрого отклика
- Добавлены CSS переменные для легкой настройки задержек
